SELECT TABLE_NAME
FROM USER_TABLES;
/* 2.3 학사관리 데이터베이스 생성하기 PP.29-33 */

--CREATE TABLE STUDENT(
--stu_no CHAR(9),
--stu_name varchar2(12),
--stu_dept varchar2(20),
--stu_grade number(1),
--stu_class char(1),
--stu_gender char(1),
--stu_height number(5,2),
--stu_weight number(5,2),
--    constraint p_stu_no primary key(stu_no));
--    
--CREATE TABLE SUBJECT(
--sub_no char(3),
--sub_name varchar2(30),
--sub_prof varchar2(12),
--sub_grade number(1),
--sub_dept varchar2(20),
--    constraint p_sub_no primary key(sub_no));
--    
--CREATE TABLE ENROL(
--sub_no CHAR(3),
--stu_no CHAR(9),
--enr_grade NUMBER(3),
--    CONSTRAINT p_course PRIMARY KEY(sub_no, stu_no));
    
--DROP TABLE ENROL;
    
--INSERT INTO STUDENT VALUES(20153075, '옥한빛', '기계', 1, 'C', 'M', 177, 80);
--INSERT INTO STUDENT VALUES(20153088, '이태연', '기계', 1, 'C', 'F', 162, 50);
--INSERT INTO STUDENT VALUES(20143054, '유가인', '기계', 2, 'C', 'F', 154, 47);
--INSERT INTO STUDENT VALUES(20152088, '조민우', '전기전자', 1, 'C', 'M', 188, 90);
--INSERT INTO STUDENT VALUES(20142021, '심수정', '전기전자', 2, 'A', 'F', 168, 45);
--INSERT INTO STUDENT VALUES(20132003, '박희철', '전기전자', 3, 'B', 'M', NULL, 63);
--INSERT INTO STUDENT VALUES(20151062, '김인중', '컴퓨터정보', 1, 'B', 'M', 166, 67);
--INSERT INTO STUDENT VALUES(20141007, '진현무', '컴퓨터정보', 2, 'A', 'M', 174, 64);
--INSERT INTO STUDENT VALUES(20131001, '김종헌', '컴퓨터정보', 3, 'C', 'M', NULL, 72);
--INSERT INTO STUDENT VALUES(20131025, '옥성우', '컴퓨터정보', 3, 'A', 'F', 172, 63);

--INSERT INTO SUBJECT VALUES('111', '데이터베이스', '이재영', 2, '컴퓨터정보');
--INSERT INTO SUBJECT VALUES('110', '자동제어', '정순정', 2, '전기전자');
--INSERT INTO SUBJECT VALUES('109', '자동화설계', '박민영', 3, '기계');
--INSERT INTO SUBJECT VALUES('101', '컴퓨터개론', '강종영', 3, '컴퓨터정보');
--INSERT INTO SUBJECT VALUES('102', '기계공작법', '김태영', 1, '기계');
--INSERT INTO SUBJECT VALUES('103', '기초전자실험', '김유석', 1, '전기전자');
--INSERT INTO SUBJECT VALUES('104', '시스템분석설계', '강석현', 3, '컴퓨터정보');
--INSERT INTO SUBJECT VALUES('105', '기계요소설계', '김명성', 1, '기계');
--INSERT INTO SUBJECT VALUES('106', '전자회로실험', '최영민', 3, '전기전자');
--INSERT INTO SUBJECT VALUES('107', 'CAD응용실습', '구봉규', 2, '기계');
--INSERT INTO SUBJECT VALUES('108', '소프트웨어공학', '권민성', 1, '컴퓨터정보');

--INSERT INTO ENROL VALUES('101', '20131001', 80);
--INSERT INTO ENROL VALUES('104', '20131001', 56);
--INSERT INTO ENROL VALUES('106', '20132003', 72);
--INSERT INTO ENROL VALUES('103', '20152008', 45);
--INSERT INTO ENROL VALUES('101', '20131025', 65);
--INSERT INTO ENROL VALUES('104', '20131025', 65);
--INSERT INTO ENROL VALUES('108', '20151062', 81);
--INSERT INTO ENROL VALUES('107', '20143054', 41);
--INSERT INTO ENROL VALUES('102', '20153075', 66);
--INSERT INTO ENROL VALUES('105', '20153075', 56);
--INSERT INTO ENROL VALUES('102', '20153088', 61);
--INSERT INTO ENROL VALUES('105', '20153088', 78);

SELECT * FROM STUDENT;
SELECT * FROM SUBJECT;
SELECT * FROM ENROL;

/* 3.1 단순검색 PP. 38-43*/

--SELECT * FROM STUDENT_SCORE;
--DROP TABLE STUDENT_SCORE;

DESC STUDENT;
DESC SUBJECT;

SELECT STU_NO, STU_NAME
FROM STUDENT;

SELECT DISTINCT(STU_DEPT)
FROM STUDENT;

SELECT 5+3
FROM DUAL;

SELECT ENR_GRADE, ENR_GRADE+5
FROM ENROL;

SELECT *
FROM ENROL;

SELECT ENR_GRADE, ENR_GRADE+5 AS NEW_GRADE
FROM ENROL;

SELECT STU_DEPT||'과 '||STU_NAME|| '입니다.' AS 학과성명
FROM STUDENT;

/* 3.2 조건 검색 PP. 44-49*/

SELECT *
FROM STUDENT
WHERE STU_DEPT='컴퓨터정보' AND STU_GRADE=2;

SELECT *
FROM STUDENT
WHERE STU_WEIGHT BETWEEN 60 AND 70;

SELECT STU_NO, STU_NAME, STU_DEPT
FROM STUDENT
WHERE STU_NAME LIKE '김%';

SELECT STU_NO, STU_NAME, STU_DEPT
FROM STUDENT
WHERE STU_NAME LIKE '_수%';

SELECT *
FROM STUDENT
WHERE STU_NO LIKE '2014%';

SELECT STU_NO, STU_NAME, STU_HEIGHT
FROM STUDENT
WHERE STU_HEIGHT IS NULL;

SELECT STU_NO, STU_NAME, STU_HEIGHT
FROM STUDENT
WHERE STU_HEIGHT IS NOT NULL;

SELECT STU_NO, STU_NAME
FROM STUDENT
WHERE STU_DEPT IN ('컴퓨터정보','기계');

/* 3.3 검색 결과의 순서화(정렬) PP.49-53 */

SELECT STU_NO, STU_NAME
FROM STUDENT
ORDER BY STU_NO;

SELECT STU_NO, STU_NAME
FROM STUDENT
ORDER BY STU_NO DESC;

SELECT STU_NO, STU_NAME, STU_DEPT, STU_WEIGHT-5 AS TARGET
FROM STUDENT
ORDER BY TARGET;

SELECT STU_NO, STU_NAME, STU_DEPT, STU_WEIGHT-5 AS TARGET
FROM STUDENT
ORDER BY 4;
/* 3.4 함수 PP.54-71*/

SELECT ROUND(345.678), ROUND(345.672, 0), ROUND(345.678, 1), ROUND(345.678, -1)
FROM DUAL;

SELECT UPPER('korea')
FROM DUAL;

SELECT SYSDATE
FROM DUAL;

ALTER SESSION SET NLS_DATE_FORMAT='mm-dd-yyyy';

SELECT SYSDATE
FROM DUAL;

SELECT NEXT_DAY(SYSDATE, '수')
FROM DUAL;

SELECT ROUND(SYSDATE, 'MON')
FROM DUAL;

SELECT EMPNO, ENAME, TO_CHAR(HIREDATE, 'YYYY-MM') AS 입사년월
FROM EMP;

SELECT TO_CHAR(TO_NUMBER(1234.5678), '9999.999')
FROM DUAL;

SELECT TO_CHAR(TO_NUMBER(1234.5678), '999.999')
FROM DUAL;

SELECT EMPNO, ENAME, TO_CHAR(TO_NUMBER(SAL), '$999') SALARY
FROM EMP;

SELECT *
FROM EMP;

SELECT EMPNO, ENAME, HIREDATE
FROM EMP
WHERE HIREDATE = TO_DATE('1980-12-17', 'YY-MM-DD');

SELECT NVL(MGR, 0)
FROM EMP;

SELECT ENAME, NVL2(COMM, SAL+COMM, SAL)
FROM EMP;

SELECT ENAME, SAL+COMM
FROM EMP;

SELECT NVL(NULLIF('A', 'A'), '널 값')
FROM DUAL;

SELECT COALESCE(NULL, NULL, 10, 100, NULL)
FROM DUAL;

SELECT EMPNO, ENAME, SAL,
    CASE JOB WHEN 'SALESMAN' THEN SAL*1.1
            WHEN 'CLERK' THEN SAL*1.15
            WHEN 'MANAGER' THEN SAL*1.2
    END AS 급여인상
FROM EMP;

SELECT EMPNO, ENAME, JOB, SAL,
    DECODE(JOB, 'SALESMAN', SAL*1.1,
                'CLERK', SAL*1.15,
                'MAGAGER', SAL*1.2,
                SAL) AS 인상된급여
FROM EMP;

SELECT MAX(ENR_GRADE), MIN(ENR_GRADE)
FROM ENROL;

SELECT MIN(STU_WEIGHT), MAX(STU_WEIGHT)
FROM STUDENT
WHERE STU_DEPT='기계';

SELECT COUNT(*), COUNT(STU_HEIGHT)
FROM STUDENT;

SELECT COUNT(STU_DEPT), COUNT(DISTINCT STU_DEPT)
FROM STUDENT;

SELECT SUM(STU_WEIGHT), TO_CHAR(AVG(STU_WEIGHT), '9999.99')
FROM STUDENT
WHERE STU_DEPT='컴퓨터정보';

SELECT COUNT(*) AS 학생, SUM(STU_HEIGHT) AS 신장합, COUNT(STU_HEIGHT) 해당학생수, AVG(STU_HEIGHT) 평균신장
FROM STUDENT;

SELECT STU_DEPT, AVG(STU_WEIGHT)
FROM STUDENT
GROUP BY STU_DEPT;

SELECT STU_DEPT, COUNT(*)
FROM STUDENT
WHERE STU_WEIGHT >=50
GROUP BY  STU_DEPT;

SELECT STU_DEPT, STU_GRADE, COUNT(*)
FROM STUDENT
GROUP BY STU_DEPT, STU_GRADE;

SELECT STU_GRADE, AVG(STU_HEIGHT)
FROM STUDENT
WHERE STU_DEPT = '기계'
GROUP BY STU_GRADE HAVING AVG(STU_HEIGHT) >=160;

SELECT STU_DEPT, MAX(STU_HEIGHT)
FROM STUDENT
GROUP BY STU_DEPT HAVING MAX(STU_HEIGHT) >=175;

SELECT TO_CHAR(MAX(AVG(STU_HEIGHT)), '999.99')
FROM STUDENT
GROUP BY STU_DEPT;